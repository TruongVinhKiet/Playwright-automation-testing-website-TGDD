***KỊCH BẢN THUYẾT TRÌNH LÝ THUYẾT & DEMO CHI TIẾT (~20 PHÚT)***
(Dựa sát 100% Nội dung hiển thị trên Slides HTML và Kịch bản Demo thực chiến Playwright)

═══════════════════════════════════════════════════════════
 PHẦN 1: BÁO CÁO LÝ THUYẾT - 9 SLIDES - DỰ KIẾN 8 PHÚT
═══════════════════════════════════════════════════════════

────────────────────────────────────────
SLIDE 1: Trang tiêu đề (~1 phút)
────────────────────────────────────────
[HÀNH ĐỘNG] Mở file index.html trên trình duyệt. Toàn màn hình (F11).
[NÓI]
"Dạ em kính chào Thầy Trịnh Công Nhựt và toàn thể các bạn sinh viên đang tham gia buổi bảo vệ đồ án môn Kiểm Thử & Đảm Bảo Chất Lượng Phần Mềm.
Đến với buổi báo cáo này, nhóm DHKKL chúng em quyết định chọn một đề tài mang tính bước ngoặt trong ngành QA, đó là: 'Playwright - Kỷ nguyên mới của Automation Testing'.
Mời Thầy và các bạn cùng đi vào chi tiết!"
[HÀNH ĐỘNG] Bấm phím → (mũi tên phải) để sang slide 2.

────────────────────────────────────────
SLIDE 2: Playwright là gì? (~1 phút)
────────────────────────────────────────
[NÓI]
"Vậy thuật ngữ Playwright là gì?
Thưa Thầy và các bạn, Playwright là một Framework mã nguồn mở cực kỳ nổi tiếng, được 'gã khổng lồ' Microsoft ra mắt vào năm 2020. Mục tiêu tối thượng của họ là để: Kiểm thử End-to-End chuyên sâu cho các hệ thống Web phức tạp hiện đại.
Điểm mạnh nhất của kiến trúc này đến từ hai chữ 'Đa':
- Thứ nhất, tính Đa trình duyệt: Hoạt động hoàn hảo trên mọi core engine, từ Chromium, cho đến WebKit của Apple Safari, hay Firefox.
- Thứ hai, tính Đa nền tảng: Viết code một lần trên Windows, nhưng có thể ném script lên server Linux CI/CD hay macOS chạy y hệt không lệch một nhịp!"
[HÀNH ĐỘNG] Bấm → sang slide 3.

────────────────────────────────────────
SLIDE 3: Tại sao chọn Playwright? (~1 phút)
────────────────────────────────────────
[NÓI]
"Lý do khiến Playwright đánh bại các cựu binh khác nằm ở 3 tính năng cốt lõi:
1. Auto-wait (Tự động chờ): Thay vì dùng hàm sleep cứng ngắc, Playwright thông minh tự kiểm tra xem phần tử có bị quảng cáo che không, có nhấp nháy không rồi mới click. Loại bỏ hoàn toàn lỗi Flaky test.
2. Web-first Assertions: Cơ chế Assert có tính tự động retry cực thông minh. Nó cố gắng thử liên tục tới khi nào pass thì ngừng hoặc hết giờ thì thôi.
3. Tốc độ cực nhanh: Thay vì giao tiếp bằng HTTP tĩnh, Playwright chọc thẳng vào trình duyệt bằng giao thức WebSocket nên phản hồi tức thì."
[HÀNH ĐỘNG] Bấm → sang slide 4.

────────────────────────────────────────
SLIDE 4: Kiến trúc 3 tầng cốt lõi (~1 phút)
────────────────────────────────────────
[NÓI]
"Để đạt hiệu năng số một thế giới, Playwright tuỳ biến hệ thống thành 3 tầng:
1. Tầng ngoài Browser: Trình duyệt vật lý siêu nặng.
2. Tầng giữa Browser Context: Đây là điểm ăn tiền nhất. Nó là một môi trường 'cô lập hoàn toàn', giống Tab ẩn danh. Mỗi Context tách biệt Cookie, Cache riêng. Chạy mô phỏng 100 User cùng lúc mà không sợ lẫn lộn dữ liệu.
3. Tầng lõi Page: Là trực tiếp một Tab đang tương tác bên trong Context đó."
[HÀNH ĐỘNG] Chỉ tay vào biểu đồ bên phải slide. Bấm → sang slide 5.

────────────────────────────────────────
SLIDE 5: Các thành phần chính trong Test Script (~1 phút)
────────────────────────────────────────
[NÓI]
"Khi viết Code chạy Bot, chúng em sử dụng mô hình 3 thành phần liên hoàn:
- Khởi đầu là Locator: Trạm Radar dò tìm phần tử UI. Ví dụ page.locator('.btn') tìm chính xác nút bấm đó.
- Tiếp đến là Action: Chỉ định Robot nhập vai làm người dùng. Dùng .click(), .fill(), .type() tự động thao tác.
- Sau cùng là Assertion: Chốt kết quả Pass hay Fail phụ thuộc vào hàm expect(). Ví dụ: bắt trang web phải có Title là 'Giỏ Hàng' mới duyệt qua."
[HÀNH ĐỘNG] Bấm → sang slide 6.

────────────────────────────────────────
SLIDE 6: Khả năng kỹ thuật linh hoạt khác (~45 giây)
────────────────────────────────────────
[NÓI]
"Playwright không chỉ click dạo, nó cấp quyền trượng Hacker thông qua ba nhóm:
1. Network Interception: Chặn ngang bất kỳ request tải file, hoặc Mock API mà chưa cần Backend Code xong.
2. API Testing: Ném REST API Get, Post, check token ngay nội hàm Script.
3. Mobile Emulation: Ép trình duyệt ngụy trang thành thiết bị di động mà không cần mua thiết bị thật."
[HÀNH ĐỘNG] Bấm → sang slide 7.

────────────────────────────────────────
SLIDE 7: Hệ sinh thái công cụ (Tooling) (~45 giây)
────────────────────────────────────────
[NÓI]
"Hệ sinh thái Tool phụ trợ khiến mọi DEV đều trầm trồ:
- Codegen: QA không cần gõ code. Mở trang web, tay bấm vào nút gì, hệ thống tự thu âm hành vi và phiên dịch ra code JavaScript hoặc C#.
- Trace Viewer: Giống Hộp Đen máy bay. Khi test báo Fail lúc 3 giờ sáng, nó quay lại được frame hình bị lỗi, DOM hiện ra sao trước thời điểm Fail.
- UI Mode: Tích hợp cực sâu vào VS Code, giao diện đồ họa đẹp, hỗ trợ debug step-by-step."
[HÀNH ĐỘNG] Bấm → sang slide 8.

────────────────────────────────────────
SLIDE 8: So sánh nền tảng (~45 giây)
────────────────────────────────────────
[NÓI]
"Ở bảng so sánh này, nếu Selenium chật vật với mô hình HTTP chậm chạp, hay Cypress gặp điểm yếu không hỗ trợ Multi-Tab. Thì Playwright đứng ở vị trí 'Thế Hệ Mới' với WebSocket bốc lửa, cân đẹp Multi-Tab, hỗ trợ đa ngôn ngữ JS/TS/Python/Java/.NET, và đặc biệt độ ổn định cực kỳ cao nhờ Auto-wait."
[HÀNH ĐỘNG] Dùng tay chỉ từng hàng bảng so sánh. Bấm → sang slide 9.

────────────────────────────────────────
SLIDE 9: Tổng kết & Chuyển luồng (~45 giây)
────────────────────────────────────────
[NÓI]
"Tóm gọn lại, với kiến trúc đột phá, tốc độ chớp nhoáng và bộ đồ nghề bá đạo, Playwright xứng đáng là Kỷ Nguyên mới của Automation Testing.
Và để kiểm chứng những tính năng đó không chỉ nằm trên giấy, ngay sau đây, nhóm em xin phép mời Thầy xem con Bot Playwright đột nhập thẳng vào hệ thống Thế Giới Di Động lớn nhất Việt Nam!
Trân trọng mời phần Demo Code của bạn [Tên Bạn] - Demo thời gian thực ạ!"

[HÀNH ĐỘNG] MC 1 lùi xuống. MC 2 bước lên. Thoát trình duyệt, mở VS Code.


═══════════════════════════════════════════════════════════════
 PHẦN 2: THỰC HÀNH DEMO CODE E2E - DỰ KIẾN 12 PHÚT
═══════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────┐
│ BƯỚC 1: MỞ VS CODE - GIẢI THÍCH CẤU TRÚC (~2 phút) │
└─────────────────────────────────────────────────┘
[HÀNH ĐỘNG] Mở VS Code đã có sẵn folder dự án playwright. Mở thanh Explorer cho thấy cấu trúc thư mục.
[NÓI]
"Dạ em xin kính chào Thầy, em xin nhận tiếp nối phần 2 là Demo Đồ án thực tế.
Trước mắt Thầy là cấu trúc thư mục chuẩn Quốc Tế. Em xin giải thích nhanh:

- Thư mục tests/ chứa file tgdd.spec.ts - đây là toàn bộ 13 Test Cases tự động hoá trên Thế Giới Di Động. Kế bên là folder utils/ chứa script visual-injector.ts để hiện con trỏ chuột đỏ trên video, và snapshots/ chứa ảnh baseline cho Visual Regression.
- File playwright.config.ts - đây là file cấu hình hạt nhân, nơi định tuyến cho Playwright biết cách chạy test.
- File index.html - trang trình chiếu slide mà bạn vừa xem phần lý thuyết.
- File slide lời thoại.txt - kịch bản thuyết trình.
- Thư mục playwright-report/ sẽ chứa trang web kết quả tự động sinh ra sau khi test xong.
- Thư mục test-results/videos/ sẽ chứa video quay lại quá trình test."

┌─────────────────────────────────────────────────┐
│ BƯỚC 2: GIẢI THÍCH FILE CONFIG (~1.5 phút)      │
└─────────────────────────────────────────────────┘
[HÀNH ĐỘNG] Click mở file playwright.config.ts trên VS Code.
[NÓI]
"Đầu tiên em vào File cấu hình config để giải thích 4 thiết lập quan trọng:

1. fullyParallel: false và workers: 1 — Ép Playwright chạy tuần tự 1 tab duy nhất, giúp thầy theo dõi mượt mà từng bước, không nhảy loạn.

2. reporter: Chọn 'list' để terminal hiện text pass/fail realtime từng step màu xanh/đỏ sinh động, và 'html' cùng option open: 'always' để SAU KHI test xong, Playwright tự động bật trang web kết quả lên trình duyệt luôn.

3. headless: false — Bắt trình duyệt phải hiện ra màn hình vật lý thay vì chạy ngầm, để chúng ta nhìn thấy Bot thao tác.

4. video: 'on' — Đặc biệt tham số này bật chế độ quay video toàn bộ quá trình test. File video tự động lưu vào test-results/videos/ sau khi hoàn tất."

┌─────────────────────────────────────────────────┐
│ BƯỚC 3: GIẢI THÍCH FILE TEST CHÍNH (~2 phút)    │
└─────────────────────────────────────────────────┘
[HÀNH ĐỘNG] Click mở file tests/tgdd.spec.ts. Cuộn lên đầu file.
[NÓI]
"Tới file Code Test chính chứa 13 Cases. Em xin lướt qua kiến trúc:

Đầu tiên ở phần beforeAll - em tạo Context trình duyệt với User-Agent giả lập Chrome thật, kích hoạt quay Video, và inject code hiện chấm chuột đỏ.

Tiếp theo là 2 hàm trợ thủ:
- humanDelay() — Giả vờ nghỉ ngẫu nhiên 1-2 giây như người thật, chống bị server phát hiện Bot.
- closePopupIfAny() — Tự quét sạch mọi popup quảng cáo bằng JavaScript."

[HÀNH ĐỘNG] Cuộn xuống từ từ, chỉ qua từng test block.
[NÓI]
"13 Cases được chia thành 3 nhóm:

Nhóm A (TC01-TC10): Hành trình mua hàng tuần tự — từ mở Trang Chủ, vào Điện Thoại, lọc Samsung, sắp xếp giá, cuộn trang, tìm kiếm S24 FE, thêm giỏ, mở giỏ hàng, đến form thanh toán.

Nhóm B (TC11-TC12): Tính năng nâng cao — Multi-Tab và Network Interception.

Nhóm C (TC13): Visual Regression Testing — so sánh pixel ảnh chụp."

┌─────────────────────────────────────────────────┐
│ BƯỚC 4: CHẠY LỆNH TEST (~2 phút quan sát)       │
└─────────────────────────────────────────────────┘
[HÀNH ĐỘNG] Mở Terminal VS Code (Ctrl+`). Gõ lệnh: npx playwright test
[NÓI]
"Sau đây em xin gõ lệnh kích hoạt: npx playwright test.
Trình duyệt Chromium vật lý đã dựng lên! Mời thầy xem:"

[HÀNH ĐỘNG] Ngồi quan sát trình duyệt tự chạy. Thuyết minh đè theo video realtime.
[NÓI theo từng Case xuất hiện]
"TC01 — Bot đang mở trang chủ Thế Giới Di Động. Tự tắt popup quảng cáo.
TC02 — Di chuột hover vào menu Điện thoại, click vào.
TC03 — Cuộn nhẹ, tìm nút Samsung bằng href, bấm force click xuyên sticky header!
TC04 — Mở dropdown sắp xếp, chọn Giá cao đến thấp.
TC05, TC06 — Cuộn trang lên xuống mượt mà như người thật.
TC07 — Gõ 'Samsung Galaxy S24 FE' từng chữ một, delay 150ms mỗi ký tự.
TC08 — Bấm 'Thêm vào giỏ', popup xác nhận đã thêm.
TC09 — Bấm 'Xem giỏ hàng', điều hướng sang trang Cart.
TC10 — Bấm 'Đặt hàng' với form trống, bắt lỗi validation hiện đỏ.
TC11 — Mở tab mới sang trang Tin tức, thao tác, đóng tab, quay về tab cũ!
TC12 — Chặn toàn bộ ảnh PNG/JPG, hack giá iPhone thành 0 đồng!
TC13 — Chụp ảnh Header, phá vỡ layout, chụp lại so sánh pixel!"

[HÀNH ĐỘNG] Đợi terminal hiện kết quả cuối cùng.
[NÓI]
"Và vâng! Pass toàn bộ 13/13 Cases qua ải TGDĐ tuyệt đối! Terminal hiện xanh lá cây hoàn hảo!"

┌──────────────────────────────────────────────────────────┐
│ BƯỚC 5: MỞ TRANG WEB KẾT QUẢ TỰ ĐỘNG (~2.5 phút)       │
└──────────────────────────────────────────────────────────┘
[HÀNH ĐỘNG] Trang Playwright Report tự bật lên trình duyệt (nhờ config open: 'always').
[NÓI]
"Thưa thầy, nhờ cấu hình em đã set sẵn, trang web kết quả Playwright Report đã TỰ ĐỘNG mở lên trình duyệt. Đây là trang báo cáo HTML do Playwright tự sinh ra.

Mời thầy quan sát:
- Tổng 13 tests đều hiện trạng thái PASSED màu xanh.
- Cột Duration cho thấy tổng thời gian chạy.
- Mỗi test case có thể click vào để xem chi tiết từng bước."

[HÀNH ĐỘNG] Click vào từng test case trên Report để mở chi tiết. Giải thích lần lượt:

[NÓI - Giải thích từng Case trên Report]
"Em xin giải thích chi tiết từng Test Case:

★ TC01 - Truy cập Trang chủ: Kiểm tra page.goto() và expect(page).toHaveTitle(). Đây là bước đơn giản nhất, verify trang TGDĐ load thành công.

★ TC02 - Điều hướng Danh mục: Dùng locator filter text 'Điện thoại' kết hợp href selector. Hover rồi force click vì menu nằm dưới sticky header.

★ TC03 - Lọc Samsung: Playwright tìm nút lọc bằng a[href*='/dtdd-samsung'] thay vì text, vì text có thể chứa icon hoặc khoảng trắng lạ. Dùng force: true để xuyên qua lớp header che.

★ TC04 - Sắp xếp giá: Mở dropdown, chọn 'Giá cao đến thấp'. Có fallback bằng page.evaluate nếu UI không tương thích.

★ TC05 & TC06 - Cuộn trang: Dùng page.mouse.wheel() cuộn từng bước 300px, cách nhau 200ms, mô phỏng đúng hành vi vuốt chuột người thật.

★ TC07 - Tìm kiếm Mổ Cò: Kỹ thuật .type() với delay 150ms mỗi ký tự. Backend TGDĐ cần thời gian fetch API suggestion, nếu gõ quá nhanh sẽ không hiện gợi ý.

★ TC08 - Thêm giỏ hàng: scrollIntoViewIfNeeded() rồi force click nút 'Thêm vào giỏ'. Kiểm tra popup xác nhận xuất hiện.

★ TC09 - Xem giỏ hàng: Điều hướng sang /cart, verify URL chứa 'cart'.

★ TC10 - Negative Test: Bấm 'Đặt hàng' với form trống. Playwright đếm số lượng element .error xuất hiện, expect phải lớn hơn 0. Đây là kiểm thử tiêu cực.

★ TC11 - Multi-Tab: Playwright mở context.newPage() tạo tab mới, navigate sang trang Tin tức, thao tác rồi đóng. Selenium không thể làm mượt được điều này.

★ TC12 - Network Interception: page.route('**/*.png', abort()) chặn toàn bộ request ảnh. Sau đó dùng page.evaluate() hack DOM thay đổi giá thành 0 đồng. Minh họa khả năng can thiệp mạng và dữ liệu runtime.

★ TC13 - Visual Regression: Chụp ảnh Header bằng toHaveScreenshot(), lưu baseline lần đầu. Sau đó cố tình phá vỡ layout (rotate logo 180 độ), chụp lại để so sánh pixel. Playwright sẽ phát hiện khác biệt và báo lỗi."

┌──────────────────────────────────────────────────────────┐
│ BƯỚC 6: MỞ VIDEO DEMO TRÊN PORTAL (~2 phút)              │
└──────────────────────────────────────────────────────────┘
[HÀNH ĐỘNG] Quay lại VS Code hoặc mở trực tiếp file index.html trong trình duyệt. Bấm phím → liên tục đến Slide 9. Bấm nút "Demo code thực tế".
[NÓI]
"Nhưng thưa thầy, cái chứng minh cực chất của Playwright nằm ở đây. Không chỉ in Text báo Pass, Playwright đã ghi lại được Video toàn bộ quá trình Bot chạy.

Nhóm em đã lập ra trang Video Portal nằm ngay trong ứng dụng. Em sẽ tải video vừa được gen ra."

[HÀNH ĐỘNG] Bấm nút "Duyệt File" → Đi tới thư mục test-results/videos/ → Chọn file .webm lớn nhất → Video tự phát.
[NÓI]
"Mời Thầy xem lại toàn bộ hành trình Bot. Thầy để ý chấm đỏ trên video - đó là con trỏ chuột ảo do script visual-injector.ts em inject vào. Cứ chấm đỏ trỏ chỗ nào là Element được Click chỗ đó!"

[HÀNH ĐỘNG] Để video chạy 30 giây, rồi cuộn xuống phía dưới Portal.
[NÓI]
"Phía dưới video, em có 4 thẻ Case Card hiện Code nâng cao. Mời thầy xem:"

[HÀNH ĐỘNG] Bấm vào thẻ TC03.
[NÓI]
"TC03 - Vượt Sticky Banner: Playwright tìm Samsung bằng href thay vì text, dùng force: true để click xuyên qua header đè lên."

[HÀNH ĐỘNG] Đóng modal, bấm thẻ TC07.
[NÓI]
"TC07 - Gõ Mổ Cò: Tham số delay: 150 trong .type() ép bot đánh từng chữ cách nhau 150ms, cho Backend kịp fetch API suggestion."

[HÀNH ĐỘNG] Đóng modal, bấm thẻ TC12.
[NÓI]
"TC12 - Network Interceptor: Hàm page.route() chặn toàn bộ request ảnh PNG/JPG, ép trang load không hình, chỉ hiện text thuần."

[HÀNH ĐỘNG] Đóng modal, bấm thẻ TC13.
[NÓI]
"TC13 - Visual Regression: Hàm toHaveScreenshot() chụp ảnh element, so sánh pixel với baseline. Lệch 1 pixel → test FAIL. Đây là Automation đỉnh điểm!"


═══════════════════════════════════════════════════════════
 TỔNG KẾT KHÉP LẠI (~1 phút)
═══════════════════════════════════════════════════════════

[HÀNH ĐỘNG] Đóng Video Portal (bấm nút Đóng Demo). Quay lại Slide 9 với nội dung Tổng kết.
[NÓI]
"Vâng, trải qua 13 Test Cases chạy thẳng vào Server Production của Thế Giới Di Động. Playwright chứng tỏ nó có thể:
- Giả mạo hành vi con người mượt mà nhất
- Can thiệp Network và Mock dữ liệu tức thì
- Nhận dạng Pixel để phát hiện lỗi UI tự động
- Quay Video bằng chứng và tự sinh trang kết quả HTML Report

Nhóm DHKKL tụi em một lần nữa cam đoan: 'Playwright sinh ra để là tương lai của QA Engineering'.

Phần trình bày và Demo bằng chứng của tụi em xin được khép lại tại đây. Cám ơn sự hỗ trợ và chỉ dạy của Thầy Trịnh Công Nhựt trong suốt học kỳ qua.
Em xin mời Thầy và Hội đồng đặt câu hỏi ạ!"


═══════════════════════════════════════════════════════════
 BẢNG THỜI GIAN TỔNG HỢP
═══════════════════════════════════════════════════════════

| Phần                                 | Thời gian  |
|--------------------------------------|------------|
| Slide 1: Tiêu đề                    | ~1 phút    |
| Slide 2: Playwright là gì?          | ~1 phút    |
| Slide 3: Tại sao chọn Playwright?   | ~1 phút    |
| Slide 4: Kiến trúc 3 tầng           | ~1 phút    |
| Slide 5: Thành phần Test Script     | ~1 phút    |
| Slide 6: Kỹ thuật nâng cao          | ~0.75 phút |
| Slide 7: Tooling                    | ~0.75 phút |
| Slide 8: So sánh                    | ~0.75 phút |
| Slide 9: Tổng kết + chuyển demo     | ~0.75 phút |
| --- TỔNG PHẦN 1 ---                 | ~8 phút    |
| Demo Bước 1: Cấu trúc folder       | ~2 phút    |
| Demo Bước 2: Giải thích config      | ~1.5 phút  |
| Demo Bước 3: Giải thích test file   | ~2 phút    |
| Demo Bước 4: Chạy test realtime     | ~2 phút    |
| Demo Bước 5: Report + từng TC       | ~2.5 phút  |
| Demo Bước 6: Video Portal + Code    | ~2 phút    |
| --- TỔNG PHẦN 2 ---                 | ~12 phút   |
| Tổng kết khép lại                   | ~1 phút    |
| ═══ TỔNG CỘNG ═══                   | ~21 phút   |


═══════════════════════════════════════════════════════════
 GHI CHÚ QUAN TRỌNG CHO NGƯỜI DEMO
═══════════════════════════════════════════════════════════

1. TRƯỚC KHI DEMO: Mở sẵn VS Code với folder playwright, đảm bảo internet ổn, trang TGDĐ không bị bảo trì.

2. NẾU TEST FAIL GIỮA CHỪNG: Bình tĩnh giải thích "Do server TGDĐ thay đổi giao diện hoặc mạng không ổn định, đây là đặc thù của E2E testing trên Production. Chúng em đã có video quay sẵn lần chạy thành công trước đó."

3. VIDEO DỰ PHÒNG: Luôn có sẵn file video .webm trong test-results/videos/ từ lần chạy trước. Nếu test fail, dùng Video Portal trên index.html để phát video dự phòng.

4. BẤM PHÍM SLIDE: Dùng phím mũi tên ← → hoặc Spacebar để chuyển slide. Không cần click chuột.

5. TỐC ĐỘ NÓI: Giữ tốc độ thoải mái, không nhanh quá. Mỗi slide khoảng 45 giây đến 1 phút là vừa.